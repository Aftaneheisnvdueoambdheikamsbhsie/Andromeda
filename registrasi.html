<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrasi Peserta</title>
    <link rel="stylesheet" href="style.css">
    <!-- Include Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>
</head>
<body>
    <header>
        <h1>Form Registrasi Peserta</h1>
    </header>
    <main>
        <form id="registration-form">
            <label for="name">Nama:</label>
            <input type="text" id="name" required>
            <label for="gender">Jenis Kelamin:</label>
            <select id="gender" required>
                <option value="Laki-laki">Laki-laki</option>
                <option value="Perempuan">Perempuan</option>
            </select>
            <label for="height">Tinggi Badan (cm):</label>
            <input type="number" id="height" required>
            <label for="weight">Berat Badan (kg):</label>
            <input type="number" id="weight" required>
            <label for="birthdate">Tanggal Lahir:</label>
            <input type="date" id="birthdate" required>
            <label for="category">Kategori:</label>
            <select id="category" required>
                <option value="Dewasa">Dewasa</option>
                <option value="Remaja">Remaja</option>
                <option value="Anak-anak">Anak-anak</option>
            </select>
            <button type="submit">Daftar</button>
        </form>
        <button class="back-button" onclick="window.location.href='home.html'">Kembali</button>
        <button class="check-data-button" onclick="window.location.href='cekdata.html'">Cek Data</button>
             
        <div id="message" style="margin-top: 20px; display: none;"></div>
    </main>

    <script>
        // Konfigurasi Firebase
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Inisialisasi Firebase
        firebase.initializeApp(firebaseConfig);

        const form = document.getElementById('registration-form');
        const messageDiv = document.getElementById('message');

        form.addEventListener('submit', function(event) {
            event.preventDefault(); // Mencegah form dari pengiriman default

            // Ambil data dari form
            const nama = document.getElementById('name').value;
            const jk = document.getElementById('gender').value;
            const tb = document.getElementById('height').value;
            const bb = document.getElementById('weight').value;
            const ttl = document.getElementById('birthdate').value;
            const kategori = document.getElementById('category').value;

            // Simpan data ke Firebase
            firebase.database().ref('peserta/').push({
                nama: nama,
                jk: jk,
                tb: tb,
                bb: bb,
                ttl: ttl,
                kategori: kategori
            })
            .then(() => {
                // Tampilkan pesan sukses
                messageDiv.style.display = 'block';
                messageDiv.innerHTML = "Data berhasil disimpan! Apakah Anda ingin menginput data lagi? <button id='yes'>Ya</button> <button id='no'>Tidak</button>";

                // Tambahkan event listener untuk tombol "Ya" dan "Tidak"
                document.getElementById('yes').addEventListener('click', function() {
                    // Reset form untuk input data baru
                    form.reset();
                    messageDiv.style.display = 'none';
                });

                document.getElementById('no').addEventListener('click', function() {
                    // Redirect ke cekdata.html
                    window.location.href = 'cekdata.html';
                });
            })
            .catch((error) => {
                console.error("Error saving data: ", error);
                messageDiv.style.display = 'block';
                messageDiv.innerHTML = "Terjadi kesalahan saat menyimpan data.";
            });
        });
    </script>
</body>
</html>

