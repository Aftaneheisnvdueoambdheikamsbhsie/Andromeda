<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="regist.css">
    <title>Registrasi Peserta</title>
</head>
<body>
    <header>
        <div class="logo">
            <img src="adm.png" alt="Logo">
        </div>
        <h1>Pendaftaran Peserta Pencak Silat</h1>
    </header>

    <main class="form-container">
        <form id="registration-form">
            <div class="form-group">
                <label for="name">Nama Lengkap:</label>
                <input type="text" id="name" name="nama" required>
            </div>
            <div class="form-group">
                <label for="gender">Jenis Kelamin:</label>
                <select id="gender" name="jk" required>
                    <option value="L">Laki-laki</option>
                    <option value="P">Perempuan</option>
                </select>
            </div>
            <div class="form-group">
                <label for="height">Tinggi Badan (cm):</label>
                <input type="number" id="height" name="tb" required>
            </div>
            <div class="form-group">
                <label for="weight">Berat Badan (kg):</label>
                <input type="number" id="weight" name="bb" required>
            </div>
            <div class="form-group">
                <label for="birthdate">Tanggal Lahir:</label>
                <input type="date" id="birthdate" name="ttl" required>
            </div>
            <div class="form-group">
                <label for="category">Kategori:</label>
                <select id="category" name="kategori" required>
                    <option value="kategori_tanding">Kategori Tanding</option>
                    <option value="kategori_seni">Kategori Seni</option>
                    <!-- Tambahkan lebih banyak kategori sesuai kebutuhan -->
                </select>
            </div>
            <button type="submit" class="button">Daftar</button>
        </form>
        <button class="back-button" onclick="window.location.href='home.html'">Kembali</button>
        <button class="check-data-button" onclick="window.location.href='cekdata.html'">Cek Data</button>
        
        <div id="message" style="margin-top: 20px; display: none;"></div>
    </main>

    <footer>
        <p>&copy; 2024 Pesta Pencak Silat. All rights reserved.</p>
    </footer>

    <!-- Script Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js"></script>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB0PBtiwbVjUjia1edNbW0UZ0L84rfcLDo",
            authDomain: "andromediadigital-ddcd0.firebaseapp.com",
            projectId: "andromediadigital-ddcd0",
            storageBucket: "andromediadigital-ddcd0.appspot.com",
            messagingSenderId: "721176765748",
            appId: "1:721176765748:web:yourAppId" // Ganti dengan appId yang sesuai
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Form submission
        const form = document.getElementById('registration-form');
        form.addEventListener('submit', function (event) {
            event.preventDefault(); // Mencegah form dari pengiriman default

            // Mengambil data dari form
            const nama = document.getElementById('name').value;
            const jk = document.getElementById('gender').value;
            const tb = document.getElementById('height').value;
            const bb = document.getElementById('weight').value;
            const ttl = document.getElementById('birthdate').value;
            const kategori = document.getElementById('category').value;

            // Menyimpan data ke Firestore
            db.collection("peserta").add({
                nama: nama,
                jk: jk,
                tb: tb,
                bb: bb,
                ttl: ttl,
                kategori: kategori
            })
            .then(() => {
                alert("Pendaftaran berhasil!");
                form.reset(); // Mengosongkan form setelah pendaftaran
            })
            .catch((error) => {
                console.error("Error adding document: ", error);
                alert("Pendaftaran gagal, silakan coba lagi.");
            });
        });
    </script>
</body>
</html>
